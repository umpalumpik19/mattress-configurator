# Only allow configurator URLs - show maintenance for others
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

# Show maintenance page for non-configurator URLs
RewriteCond %{REQUEST_URI} !^/configurator/
RewriteCond %{REQUEST_URI} !^/static/
RewriteCond %{REQUEST_URI} !^/manifest\.json$
RewriteCond %{REQUEST_URI} !^/favicon\.ico$
RewriteCond %{REQUEST_URI} !^/(data|layers|icons)/
RewriteCond %{REQUEST_URI} !^/maintenance\.html$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /maintenance.html [L]

# Handle configurator routes - redirect to React app
RewriteCond %{REQUEST_URI} ^/configurator/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.html [L]
</IfModule>

# Set proper headers for maintenance page
<Files "maintenance.html">
    Header always set Retry-After "3600"
</Files>